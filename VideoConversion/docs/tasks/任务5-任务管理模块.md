# ä»»åŠ¡5ï¼šä»»åŠ¡ç®¡ç†æ¨¡å—

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

å®ç°å®Œæ•´çš„ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬ä»»åŠ¡çŠ¶æ€æ˜¾ç¤ºã€è¿›åº¦è·Ÿè¸ªã€æ“ä½œæ§åˆ¶å’Œæœ€è¿‘ä»»åŠ¡åˆ—è¡¨ã€‚

## ğŸ¯ ä»»åŠ¡ç›®æ ‡

- [ ] åˆ›å»ºä»»åŠ¡æ˜¾ç¤ºç•Œé¢
- [ ] å®ç°ä»»åŠ¡çŠ¶æ€ç®¡ç†
- [ ] æ·»åŠ ä»»åŠ¡æ“ä½œåŠŸèƒ½
- [ ] æ˜¾ç¤ºæœ€è¿‘ä»»åŠ¡åˆ—è¡¨

## ğŸ“ è¯¦ç»†ä»»åŠ¡æ¸…å•

### æ­¥éª¤5.1ï¼šåˆ›å»ºä»»åŠ¡æ˜¾ç¤ºç•Œé¢

#### ä»»åŠ¡æ¸…å•
- [ ] è®¾è®¡å½“å‰ä»»åŠ¡æ˜¾ç¤ºåŒºåŸŸ
- [ ] åˆ›å»ºè¿›åº¦æ¡å’ŒçŠ¶æ€æ˜¾ç¤º
- [ ] æ·»åŠ ä»»åŠ¡æ“ä½œæŒ‰é’®
- [ ] å®ç°æœ€è¿‘ä»»åŠ¡åˆ—è¡¨

#### å®ç°ä»£ç 
```html
<!-- å½“å‰ä»»åŠ¡æ˜¾ç¤ºåŒºåŸŸ -->
<div id="currentTaskSection" class="card mb-4" style="display: none;">
    <div class="card-header bg-primary text-white">
        <h6 class="mb-0">
            <i class="fas fa-cog fa-spin"></i>
            å½“å‰è½¬æ¢ä»»åŠ¡
        </h6>
    </div>
    <div class="card-body">
        <!-- ä»»åŠ¡åŸºæœ¬ä¿¡æ¯ -->
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h6 class="mb-0">
                <span id="currentTaskName">ä»»åŠ¡åç§°</span>
            </h6>
            <small class="text-muted" id="taskId">ä»»åŠ¡ID</small>
        </div>
        
        <!-- æ–‡ä»¶ä¿¡æ¯ -->
        <div class="row mb-3" id="fileInfo" style="display: none;">
            <div class="col-6">
                <small class="text-muted">åŸå§‹æ–‡ä»¶</small><br>
                <span id="originalFileName" class="fw-bold"></span>
            </div>
            <div class="col-6">
                <small class="text-muted">è¾“å‡ºæ ¼å¼</small><br>
                <span id="outputFormat" class="fw-bold"></span>
            </div>
        </div>
        
        <!-- è¿›åº¦æ¡ -->
        <div class="progress mb-3" style="height: 25px;">
            <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated"
                 role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <span class="fw-bold">0%</span>
            </div>
        </div>
        
        <!-- è¯¦ç»†çŠ¶æ€ä¿¡æ¯ -->
        <div class="row text-center mb-3">
            <div class="col-3">
                <small class="text-muted">è½¬æ¢é€Ÿåº¦</small><br>
                <span id="conversionSpeed" class="fw-bold">-</span>
            </div>
            <div class="col-3">
                <small class="text-muted">å‰©ä½™æ—¶é—´</small><br>
                <span id="remainingTime" class="fw-bold">-</span>
            </div>
            <div class="col-3">
                <small class="text-muted">å·²ç”¨æ—¶é—´</small><br>
                <span id="elapsedTime" class="fw-bold">-</span>
            </div>
            <div class="col-3">
                <small class="text-muted">æ–‡ä»¶å¤§å°</small><br>
                <span id="fileSize" class="fw-bold">-</span>
            </div>
        </div>
        
        <!-- å½“å‰çŠ¶æ€ -->
        <div class="alert alert-info mb-3" role="alert" id="taskStatusAlert">
            <i class="fas fa-info-circle"></i>
            <span id="taskStatus">ç­‰å¾…ä¸­...</span>
        </div>
        
        <!-- æ“ä½œæŒ‰é’® -->
        <div class="d-flex gap-2" id="taskActionButtons">
            <button type="button" class="btn btn-outline-danger btn-sm" id="cancelTask">
                <i class="fas fa-stop"></i> å–æ¶ˆè½¬æ¢
            </button>
            <button type="button" class="btn btn-outline-info btn-sm" id="refreshTask" style="display: none;">
                <i class="fas fa-sync"></i> åˆ·æ–°çŠ¶æ€
            </button>
            <a class="btn btn-outline-success btn-sm" id="downloadTask" style="display: none;">
                <i class="fas fa-download"></i> ä¸‹è½½æ–‡ä»¶
            </a>
            <button type="button" class="btn btn-outline-primary btn-sm" id="restartTask" style="display: none;">
                <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹
            </button>
        </div>
    </div>
</div>

<!-- æœ€è¿‘ä»»åŠ¡åˆ—è¡¨ -->
<div id="recentTasksSection" class="card">
    <div class="card-header">
        <h6 class="mb-0">
            <i class="fas fa-history text-secondary"></i>
            æœ€è¿‘ä»»åŠ¡
        </h6>
    </div>
    <div class="card-body">
        <div id="recentTasks">
            <p class="text-muted text-center">æš‚æ— æœ€è¿‘ä»»åŠ¡</p>
        </div>
    </div>
</div>
```

### æ­¥éª¤5.2ï¼šå®ç°ä»»åŠ¡çŠ¶æ€ç®¡ç†

#### ä»»åŠ¡æ¸…å•
- [ ] å®ç°ä»»åŠ¡å¼€å§‹å¤„ç†
- [ ] æ·»åŠ è¿›åº¦æ›´æ–°é€»è¾‘
- [ ] å¤„ç†ä»»åŠ¡å®Œæˆå’Œå¤±è´¥
- [ ] å®ç°ä»»åŠ¡æ“ä½œåŠŸèƒ½

#### å®ç°ä»£ç 
```javascript
// ä»»åŠ¡ç®¡ç†æ¨¡å—åˆå§‹åŒ–
function initializeTaskManagement() {
    console.log('ğŸ“Š åˆå§‹åŒ–ä»»åŠ¡ç®¡ç†æ¨¡å—...');
    
    // ç»‘å®šä»»åŠ¡æ“ä½œæŒ‰é’®äº‹ä»¶
    bindTaskActionButtons();
    
    // åŠ è½½æœ€è¿‘ä»»åŠ¡
    loadRecentTasks();
}

// ä»»åŠ¡å¼€å§‹å¤„ç†
function handleTaskStarted(data) {
    console.log('ğŸš€ ä»»åŠ¡å¼€å§‹:', data);
    
    currentTaskId = data.taskId;
    currentTaskStartTime = new Date();
    
    // æ˜¾ç¤ºå½“å‰ä»»åŠ¡
    showCurrentTask(data);
    
    // åŠ å…¥ä»»åŠ¡ç»„ä»¥æ¥æ”¶è¿›åº¦æ›´æ–°
    joinTaskGroup(data.taskId);
    
    // å¼€å§‹è®¡æ—¶
    startTaskTimer();
    
    // æ›´æ–°UIçŠ¶æ€
    updateTaskActionButtons('running');
    
    // æ˜¾ç¤ºé€šçŸ¥
    showAlert('info', `è½¬æ¢ä»»åŠ¡å·²å¼€å§‹: ${data.fileName || data.taskId}`);
}

// æ˜¾ç¤ºå½“å‰ä»»åŠ¡
function showCurrentTask(data) {
    console.log('ğŸ“‹ æ˜¾ç¤ºå½“å‰ä»»åŠ¡');
    
    const currentTaskSection = document.getElementById('currentTaskSection');
    const taskName = document.getElementById('currentTaskName');
    const taskIdElement = document.getElementById('taskId');
    const originalFileName = document.getElementById('originalFileName');
    const fileInfo = document.getElementById('fileInfo');
    
    // æ›´æ–°ä»»åŠ¡ä¿¡æ¯
    if (taskName) taskName.textContent = data.fileName || data.taskId;
    if (taskIdElement) taskIdElement.textContent = data.taskId;
    
    // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
    if (data.fileName && originalFileName) {
        originalFileName.textContent = data.fileName;
        if (fileInfo) fileInfo.style.display = 'block';
    }
    
    // é‡ç½®è¿›åº¦æ¡
    resetProgressBar();
    
    // æ˜¾ç¤ºä»»åŠ¡å®¹å™¨
    if (currentTaskSection) {
        currentTaskSection.style.display = 'block';
    }
}

// é‡ç½®è¿›åº¦æ¡
function resetProgressBar() {
    const progressBar = document.getElementById('progressBar');
    if (progressBar) {
        progressBar.style.width = '0%';
        progressBar.setAttribute('aria-valuenow', '0');
        progressBar.className = 'progress-bar progress-bar-striped progress-bar-animated';
        const span = progressBar.querySelector('span');
        if (span) span.textContent = '0%';
    }
}

// è¿›åº¦æ›´æ–°å¤„ç†
function updateProgress(data) {
    if (!data || !data.taskId || data.taskId !== currentTaskId) return;
    
    console.log('ğŸ“Š æ›´æ–°è¿›åº¦:', data.progress + '%');
    
    // æ›´æ–°è¿›åº¦æ¡
    const progressBar = document.getElementById('progressBar');
    if (progressBar) {
        progressBar.style.width = `${data.progress}%`;
        progressBar.setAttribute('aria-valuenow', data.progress);
        const span = progressBar.querySelector('span');
        if (span) span.textContent = `${data.progress}%`;
    }
    
    // æ›´æ–°è¯¦ç»†ä¿¡æ¯
    updateTaskDetails(data);
    
    // æ›´æ–°æœ€è¿‘ä»»åŠ¡åˆ—è¡¨ä¸­çš„è¿›åº¦
    updateRecentTaskProgress(data.taskId, data.progress);
}

// æ›´æ–°ä»»åŠ¡è¯¦ç»†ä¿¡æ¯
function updateTaskDetails(data) {
    // æ›´æ–°è½¬æ¢é€Ÿåº¦
    if (data.speed) {
        const speedElement = document.getElementById('conversionSpeed');
        if (speedElement) speedElement.textContent = data.speed;
    }
    
    // æ›´æ–°å‰©ä½™æ—¶é—´
    if (data.remainingSeconds) {
        const remainingElement = document.getElementById('remainingTime');
        if (remainingElement) {
            remainingElement.textContent = formatTime(data.remainingSeconds);
        }
    }
    
    // æ›´æ–°å·²ç”¨æ—¶é—´
    if (currentTaskStartTime) {
        const elapsedSeconds = Math.floor((new Date() - currentTaskStartTime) / 1000);
        const elapsedElement = document.getElementById('elapsedTime');
        if (elapsedElement) {
            elapsedElement.textContent = formatTime(elapsedSeconds);
        }
    }
    
    // æ›´æ–°çŠ¶æ€æ¶ˆæ¯
    if (data.message) {
        const statusElement = document.getElementById('taskStatus');
        if (statusElement) statusElement.textContent = data.message;
    }
}

// ä»»åŠ¡å®Œæˆå¤„ç†
function handleTaskCompleted(data) {
    console.log('âœ… ä»»åŠ¡å®Œæˆ:', data);
    
    currentTaskId = null;
    currentTaskStartTime = null;
    
    // æ›´æ–°è¿›åº¦æ¡ä¸º100%
    const progressBar = document.getElementById('progressBar');
    if (progressBar) {
        progressBar.style.width = '100%';
        progressBar.setAttribute('aria-valuenow', '100');
        progressBar.classList.remove('progress-bar-animated');
        progressBar.classList.add('bg-success');
        const span = progressBar.querySelector('span');
        if (span) span.textContent = '100%';
    }
    
    // æ›´æ–°çŠ¶æ€
    updateTaskStatus('è½¬æ¢å®Œæˆï¼', 'success');
    
    // æ˜¾ç¤ºä¸‹è½½æŒ‰é’®
    if (data.downloadUrl) {
        showDownloadButton(data.downloadUrl, data.fileName);
    }
    
    // æ›´æ–°æ“ä½œæŒ‰é’®
    updateTaskActionButtons('completed');
    
    // åˆ·æ–°æœ€è¿‘ä»»åŠ¡åˆ—è¡¨
    loadRecentTasks();
    
    // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
    const duration = data.duration ? ` (è€—æ—¶: ${formatTime(data.duration)})` : '';
    showAlert('success', `è½¬æ¢å®Œæˆ: ${data.fileName || data.taskId}${duration}`);
}

// ä»»åŠ¡å¤±è´¥å¤„ç†
function handleTaskFailed(data) {
    console.log('âŒ ä»»åŠ¡å¤±è´¥:', data);
    
    currentTaskId = null;
    currentTaskStartTime = null;
    
    // æ›´æ–°è¿›åº¦æ¡æ ·å¼
    const progressBar = document.getElementById('progressBar');
    if (progressBar) {
        progressBar.classList.remove('progress-bar-animated');
        progressBar.classList.add('bg-danger');
    }
    
    // æ›´æ–°çŠ¶æ€
    updateTaskStatus(`è½¬æ¢å¤±è´¥: ${data.error || 'æœªçŸ¥é”™è¯¯'}`, 'danger');
    
    // æ›´æ–°æ“ä½œæŒ‰é’®
    updateTaskActionButtons('failed');
    
    // åˆ·æ–°æœ€è¿‘ä»»åŠ¡åˆ—è¡¨
    loadRecentTasks();
    
    // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
    showAlert('danger', `è½¬æ¢å¤±è´¥: ${data.fileName || data.taskId} - ${data.error || 'æœªçŸ¥é”™è¯¯'}`);
}
```

### æ­¥éª¤5.3ï¼šå®ç°ä»»åŠ¡æ“ä½œåŠŸèƒ½

#### ä»»åŠ¡æ¸…å•
- [ ] ç»‘å®šæ“ä½œæŒ‰é’®äº‹ä»¶
- [ ] å®ç°ä»»åŠ¡å–æ¶ˆåŠŸèƒ½
- [ ] æ·»åŠ ä»»åŠ¡çŠ¶æ€åˆ·æ–°
- [ ] å¤„ç†ä»»åŠ¡é‡å¯

#### å®ç°ä»£ç 
```javascript
// ç»‘å®šä»»åŠ¡æ“ä½œæŒ‰é’®äº‹ä»¶
function bindTaskActionButtons() {
    // å–æ¶ˆä»»åŠ¡æŒ‰é’®
    const cancelBtn = document.getElementById('cancelTask');
    if (cancelBtn) {
        cancelBtn.addEventListener('click', function() {
            if (currentTaskId) {
                cancelCurrentTask();
            }
        });
    }
    
    // åˆ·æ–°ä»»åŠ¡çŠ¶æ€æŒ‰é’®
    const refreshBtn = document.getElementById('refreshTask');
    if (refreshBtn) {
        refreshBtn.addEventListener('click', function() {
            if (currentTaskId) {
                refreshTaskStatus(currentTaskId);
            }
        });
    }
    
    // é‡æ–°å¼€å§‹ä»»åŠ¡æŒ‰é’®
    const restartBtn = document.getElementById('restartTask');
    if (restartBtn) {
        restartBtn.addEventListener('click', function() {
            restartTask();
        });
    }
}

// å–æ¶ˆå½“å‰ä»»åŠ¡
async function cancelCurrentTask() {
    if (!currentTaskId) return;
    
    try {
        const result = await SignalRInvoker.invoke("CancelTask", currentTaskId);
        
        if (result && result.success) {
            showAlert('info', 'ä»»åŠ¡å–æ¶ˆè¯·æ±‚å·²å‘é€');
        } else {
            throw new Error(result?.message || 'å–æ¶ˆå¤±è´¥');
        }
    } catch (error) {
        console.error('å–æ¶ˆä»»åŠ¡å¤±è´¥:', error);
        showAlert('danger', 'å–æ¶ˆä»»åŠ¡å¤±è´¥: ' + error.message);
    }
}

// åˆ·æ–°ä»»åŠ¡çŠ¶æ€
async function refreshTaskStatus(taskId) {
    if (!taskId || connection.state !== signalR.HubConnectionState.Connected) {
        showAlert('warning', 'æ— æ³•åˆ·æ–°ä»»åŠ¡çŠ¶æ€ï¼šè¿æ¥ä¸å¯ç”¨');
        return;
    }
    
    try {
        await SignalRInvoker.invoke("GetTaskStatus", taskId);
        showAlert('info', 'å·²è¯·æ±‚åˆ·æ–°ä»»åŠ¡çŠ¶æ€');
    } catch (error) {
        console.error('åˆ·æ–°ä»»åŠ¡çŠ¶æ€å¤±è´¥:', error);
        showAlert('danger', 'åˆ·æ–°å¤±è´¥: ' + error.message);
    }
}

// é‡å¯ä»»åŠ¡
function restartTask() {
    // é‡ç½®è¡¨å•å¹¶é‡æ–°å¼€å§‹
    const form = document.getElementById('conversionForm');
    if (form) {
        // æ¸…é™¤å½“å‰ä»»åŠ¡æ˜¾ç¤º
        hideCurrentTask();
        
        // é‡æ–°æäº¤è¡¨å•
        form.dispatchEvent(new Event('submit'));
    }
}

// éšè—å½“å‰ä»»åŠ¡
function hideCurrentTask() {
    const currentTaskSection = document.getElementById('currentTaskSection');
    if (currentTaskSection) {
        currentTaskSection.style.display = 'none';
    }
    
    currentTaskId = null;
    currentTaskStartTime = null;
    
    // æ¸…ç†è®¡æ—¶å™¨
    if (window.taskTimer) {
        clearInterval(window.taskTimer);
        window.taskTimer = null;
    }
}

// æ›´æ–°ä»»åŠ¡çŠ¶æ€æ˜¾ç¤º
function updateTaskStatus(message, type) {
    const statusAlert = document.getElementById('taskStatusAlert');
    const statusElement = document.getElementById('taskStatus');
    
    if (statusElement) statusElement.textContent = message;
    if (statusAlert) {
        statusAlert.className = `alert alert-${type} mb-3`;
    }
}

// æ˜¾ç¤ºä¸‹è½½æŒ‰é’®
function showDownloadButton(downloadUrl, fileName) {
    const downloadBtn = document.getElementById('downloadTask');
    if (downloadBtn) {
        downloadBtn.href = downloadUrl;
        downloadBtn.download = fileName || 'converted_video';
        downloadBtn.style.display = 'inline-block';
    }
}

// æ›´æ–°ä»»åŠ¡æ“ä½œæŒ‰é’®çŠ¶æ€
function updateTaskActionButtons(status) {
    const cancelBtn = document.getElementById('cancelTask');
    const refreshBtn = document.getElementById('refreshTask');
    const downloadBtn = document.getElementById('downloadTask');
    const restartBtn = document.getElementById('restartTask');
    
    // éšè—æ‰€æœ‰æŒ‰é’®
    [cancelBtn, refreshBtn, downloadBtn, restartBtn].forEach(btn => {
        if (btn) btn.style.display = 'none';
    });
    
    // æ ¹æ®çŠ¶æ€æ˜¾ç¤ºç›¸åº”æŒ‰é’®
    switch (status) {
        case 'running':
            if (cancelBtn) cancelBtn.style.display = 'inline-block';
            if (refreshBtn) refreshBtn.style.display = 'inline-block';
            break;
        case 'completed':
            if (downloadBtn) downloadBtn.style.display = 'inline-block';
            if (restartBtn) restartBtn.style.display = 'inline-block';
            break;
        case 'failed':
            if (refreshBtn) refreshBtn.style.display = 'inline-block';
            if (restartBtn) restartBtn.style.display = 'inline-block';
            break;
    }
}
```

### æ­¥éª¤5.4ï¼šå®ç°æœ€è¿‘ä»»åŠ¡åˆ—è¡¨

#### ä»»åŠ¡æ¸…å•
- [ ] åŠ è½½æœ€è¿‘ä»»åŠ¡æ•°æ®
- [ ] æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨
- [ ] æ›´æ–°ä»»åŠ¡è¿›åº¦
- [ ] å¤„ç†ä»»åŠ¡ç‚¹å‡»äº‹ä»¶

#### å®ç°ä»£ç 
```javascript
// åŠ è½½æœ€è¿‘ä»»åŠ¡
async function loadRecentTasks() {
    try {
        const response = await fetch('/api/conversion/recent?count=10');
        const result = await response.json();
        
        if (result.success) {
            displayRecentTasks(result.data);
        }
    } catch (error) {
        console.error('åŠ è½½æœ€è¿‘ä»»åŠ¡å¤±è´¥:', error);
    }
}

// æ˜¾ç¤ºæœ€è¿‘ä»»åŠ¡
function displayRecentTasks(tasks) {
    const recentTasksDiv = document.getElementById('recentTasks');
    if (!recentTasksDiv) return;
    
    if (!tasks || tasks.length === 0) {
        recentTasksDiv.innerHTML = '<p class="text-muted text-center">æš‚æ— æœ€è¿‘ä»»åŠ¡</p>';
        return;
    }
    
    let html = '';
    tasks.forEach(task => {
        const statusClass = getTaskStatusClass(task.status);
        const statusIcon = getTaskStatusIcon(task.status);
        
        html += `
            <div class="card mb-2 task-item" data-task-id="${task.taskId}">
                <div class="card-body p-3">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h6 class="card-title mb-1">${task.fileName || task.taskName}</h6>
                            <small class="text-muted">
                                <i class="fas fa-clock"></i> ${formatDateTime(task.createdAt)}
                            </small>
                        </div>
                        <span class="badge bg-${statusClass}">
                            <i class="fas fa-${statusIcon}"></i> ${task.status}
                        </span>
                    </div>
                    ${task.progress !== undefined ? `
                        <div class="progress mt-2" style="height: 4px;">
                            <div class="progress-bar bg-${statusClass}" 
                                 style="width: ${task.progress}%"></div>
                        </div>
                        <small class="text-muted">${task.progress}% å®Œæˆ</small>
                    ` : ''}
                    ${task.downloadUrl ? `
                        <div class="mt-2">
                            <a href="${task.downloadUrl}" class="btn btn-outline-success btn-sm" 
                               download="${task.fileName}">
                                <i class="fas fa-download"></i> ä¸‹è½½
                            </a>
                        </div>
                    ` : ''}
                </div>
            </div>
        `;
    });
    
    recentTasksDiv.innerHTML = html;
    
    // ç»‘å®šä»»åŠ¡ç‚¹å‡»äº‹ä»¶
    bindRecentTaskEvents();
}

// è·å–ä»»åŠ¡çŠ¶æ€æ ·å¼ç±»
function getTaskStatusClass(status) {
    const statusMap = {
        'Completed': 'success',
        'Failed': 'danger',
        'Running': 'primary',
        'Pending': 'warning',
        'Cancelled': 'secondary'
    };
    return statusMap[status] || 'secondary';
}

// è·å–ä»»åŠ¡çŠ¶æ€å›¾æ ‡
function getTaskStatusIcon(status) {
    const iconMap = {
        'Completed': 'check-circle',
        'Failed': 'exclamation-triangle',
        'Running': 'cog fa-spin',
        'Pending': 'clock',
        'Cancelled': 'times-circle'
    };
    return iconMap[status] || 'question-circle';
}

// æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´
function formatDateTime(dateString) {
    const date = new Date(dateString);
    return date.toLocaleString('zh-CN', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit'
    });
}

// ç»‘å®šæœ€è¿‘ä»»åŠ¡äº‹ä»¶
function bindRecentTaskEvents() {
    const taskItems = document.querySelectorAll('.task-item');
    taskItems.forEach(item => {
        item.addEventListener('click', function() {
            const taskId = this.dataset.taskId;
            if (taskId) {
                showTaskDetails(taskId);
            }
        });
    });
}

// æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…
function showTaskDetails(taskId) {
    // å¯ä»¥å®ç°ä»»åŠ¡è¯¦æƒ…å¼¹çª—æˆ–è·³è½¬åˆ°è¯¦æƒ…é¡µé¢
    console.log('æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…:', taskId);
}

// æ›´æ–°æœ€è¿‘ä»»åŠ¡ä¸­çš„è¿›åº¦
function updateRecentTaskProgress(taskId, progress) {
    const taskItem = document.querySelector(`[data-task-id="${taskId}"]`);
    if (taskItem) {
        const progressBar = taskItem.querySelector('.progress-bar');
        const progressText = taskItem.querySelector('small');
        
        if (progressBar) {
            progressBar.style.width = `${progress}%`;
        }
        
        if (progressText) {
            progressText.textContent = `${progress}% å®Œæˆ`;
        }
    }
}

// å¼€å§‹ä»»åŠ¡è®¡æ—¶å™¨
function startTaskTimer() {
    if (window.taskTimer) {
        clearInterval(window.taskTimer);
    }
    
    window.taskTimer = setInterval(() => {
        if (currentTaskStartTime) {
            const elapsedSeconds = Math.floor((new Date() - currentTaskStartTime) / 1000);
            const elapsedElement = document.getElementById('elapsedTime');
            if (elapsedElement) {
                elapsedElement.textContent = formatTime(elapsedSeconds);
            }
        }
    }, 1000);
}
```

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] ä»»åŠ¡çŠ¶æ€æ­£ç¡®æ˜¾ç¤º
- [ ] è¿›åº¦æ›´æ–°å®æ—¶å‡†ç¡®
- [ ] ä»»åŠ¡æ“ä½œåŠŸèƒ½æ­£å¸¸
- [ ] æœ€è¿‘ä»»åŠ¡åˆ—è¡¨æ­£ç¡®

### ç”¨æˆ·ä½“éªŒéªŒæ”¶
- [ ] ç•Œé¢å“åº”åŠæ—¶
- [ ] çŠ¶æ€å˜åŒ–æ¸…æ™°
- [ ] æ“ä½œåé¦ˆæ˜ç¡®
- [ ] é”™è¯¯å¤„ç†å‹å¥½

### æ€§èƒ½éªŒæ”¶
- [ ] è¿›åº¦æ›´æ–°ä¸å¡é¡¿
- [ ] å†…å­˜ä½¿ç”¨åˆç†
- [ ] å®šæ—¶å™¨æ­£ç¡®æ¸…ç†

## ğŸ”— ä¾èµ–å…³ç³»

### å‰ç½®ä¾èµ–
- ä»»åŠ¡1ï¼šåŸºç¡€æ¶æ„æ­å»º
- ä»»åŠ¡3ï¼šSignalRé€šä¿¡æ¨¡å—

### åç»­ä»»åŠ¡
- ä»»åŠ¡6ï¼šGPUç¡¬ä»¶åŠ é€Ÿæ¨¡å—
- ä»»åŠ¡7ï¼šé”™è¯¯å¤„ç†å’Œä¼˜åŒ–

## ğŸ“Š é¢„ä¼°å·¥æ—¶

- **å¼€å‘æ—¶é—´**: 5-6å°æ—¶
- **æµ‹è¯•æ—¶é—´**: 2å°æ—¶
- **æ€»è®¡**: 7-8å°æ—¶

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **çŠ¶æ€åŒæ­¥**: ç¡®ä¿ä»»åŠ¡çŠ¶æ€ä¸æœåŠ¡å™¨ç«¯åŒæ­¥
2. **å†…å­˜ç®¡ç†**: åŠæ—¶æ¸…ç†å®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬å™¨
3. **ç”¨æˆ·ä½“éªŒ**: æä¾›æ¸…æ™°çš„ä»»åŠ¡çŠ¶æ€åé¦ˆ
4. **é”™è¯¯å¤„ç†**: å®Œå–„çš„ä»»åŠ¡å¤±è´¥å¤„ç†æœºåˆ¶

## ğŸ“ å®Œæˆæ ‡è®°

- [ ] æ­¥éª¤5.1å®Œæˆ
- [ ] æ­¥éª¤5.2å®Œæˆ
- [ ] æ­¥éª¤5.3å®Œæˆ
- [ ] æ­¥éª¤5.4å®Œæˆ
- [ ] éªŒæ”¶æµ‹è¯•é€šè¿‡
- [ ] ä»£ç æäº¤å®Œæˆ

**å®Œæˆæ—¶é—´**: ___________  
**å¼€å‘è€…**: ___________  
**å®¡æ ¸è€…**: ___________
