<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="VideoConversion_Client.Views.FileUploadView">

    <!-- 内容区域 -->
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 状态1：空白状态 - 文件拖拽区域 -->
        <Border Grid.Row="0" Name="EmptyStateView"
                DragDrop.AllowDrop="True"
                PointerPressed="FileDropZone_PointerPressed"
                Background="#f5f5f5"
                BorderBrush="#e0e0e0"
                BorderThickness="2"
                CornerRadius="12"
                Padding="30" 
                MinHeight="300">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="20">
                <!-- 紫色文件夹图标 -->
                <Border Background="#9b59b6"
                        CornerRadius="8"
                        Width="80"
                        Height="60"
                        HorizontalAlignment="Center">
                    <TextBlock Text="+"
                               FontSize="30"
                               Foreground="White"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center" />
                </Border>

                <TextBlock Text="点击添加或拖动文件到这里。"
                           FontSize="16"
                           HorizontalAlignment="Center"
                           Foreground="#666" />

                <!-- 三步骤操作指南 -->
                <StackPanel Spacing="12" HorizontalAlignment="Center">
                    <!-- 步骤1 -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10">
                        <TextBlock Text="步骤1：添加" FontSize="14" VerticalAlignment="Center" Foreground="#666" />
                        <Button Name="SelectFileBtn"
                                Content="📁"
                                Background="#007acc"
                                Foreground="White"
                                Padding="8,6"
                                CornerRadius="4"
                                Click="SelectFileBtn_Click" />
                        <Button Name="SelectFolderBtn"
                                Content="🔄"
                                Background="#007acc"
                                Foreground="White"
                                Padding="8,6"
                                CornerRadius="4"
                                Click="SelectFolderBtn_Click" />
                        <TextBlock Text="或者从这里拖动文件夹。" FontSize="14" VerticalAlignment="Center" Foreground="#666" />
                    </StackPanel>

                    <!-- 步骤2 -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10">
                        <TextBlock Text="步骤2：选择你的格式。" FontSize="14" VerticalAlignment="Center" Foreground="#666" />
                    </StackPanel>

                    <!-- 步骤3 -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10">
                        <TextBlock Text="步骤3：开始转换。" FontSize="14" VerticalAlignment="Center" Foreground="#666" />
                        <Button Name="ConvertAllBtn"
                                Content="转换全部"
                                Background="#9b59b6"
                                Foreground="White"
                                Padding="15,8"
                                CornerRadius="20"
                                Click="ConvertAllBtn_Click" />
                        <Button Name="ConvertBtn"
                                Content="转换"
                                Background="Transparent"
                                Foreground="#9b59b6"
                                BorderBrush="#9b59b6"
                                BorderThickness="1"
                                Padding="15,8"
                                CornerRadius="20"
                                Click="ConvertBtn_Click" />
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- 状态2：文件列表状态 -->
        <Grid Grid.Row="0" Name="FileListView" IsVisible="False">
            <!-- 添加拖拽支持到文件列表区域 -->
            <Border DragDrop.AllowDrop="True"
                    Background="Transparent">
                <ScrollViewer>
                    <StackPanel Name="FileListContainer" Spacing="8" Margin="0,5">
                        <!-- 文件项将动态添加到这里 -->
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- 底部输出设置 -->
        <Grid Grid.Row="1" Margin="0,12,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="200" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="200" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="输出格式:" FontSize="14" VerticalAlignment="Center" Margin="0,0,10,0" />
            <ComboBox Grid.Column="1" Name="OutputFormatCombo" SelectedIndex="0">
                <ComboBoxItem Content="MP4" />
                <ComboBoxItem Content="AVI" />
                <ComboBoxItem Content="MOV" />
                <ComboBoxItem Content="MKV" />
            </ComboBox>

            <Button Grid.Column="2" Name="SettingsBtn" Content="⚙️" Background="Transparent" BorderThickness="0" Padding="10" Margin="10,0" Click="SettingsBtn_Click" />

            <CheckBox Grid.Column="3" Name="MergeAllFilesCheckBox" Content="合并全部文件" Margin="10,0" />

            <TextBlock Grid.Column="4" Text="输出文件夹:" FontSize="14" VerticalAlignment="Center" Margin="20,0,10,0" />
            <ComboBox Grid.Column="5" Name="OutputFolderCombo" SelectedIndex="0">
                <ComboBoxItem Content="与源文件相同目录" />
                <ComboBoxItem Content="自定义目录" />
            </ComboBox>

            <Button Grid.Column="7" Name="ConvertAllBottomBtn" Content="转换全部" Background="#9b59b6" Foreground="White" Padding="20,8" CornerRadius="20" Click="ConvertAllBtn_Click" />
        </Grid>
    </Grid>
</UserControl>