<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="VideoConversion_Client.Views.ConversionSettingsWindow"
        Title="转换设置"
        Width="800"
        Height="700"
        MinWidth="700"
        MinHeight="600"
        WindowStartupLocation="CenterOwner"
        CanResize="True">

    <Window.Styles>
        <!-- 标题样式 -->
        <Style Selector="TextBlock.section-title">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="#333" />
            <Setter Property="Margin" Value="0,0,0,8" />
        </Style>

        <!-- 标签样式 -->
        <Style Selector="TextBlock.label">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Foreground" Value="#666" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <!-- 设置组合框样式 -->
        <Style Selector="ComboBox.setting-combo">
            <Setter Property="MinWidth" Value="150" />
            <Setter Property="Height" Value="32" />
        </Style>

        <!-- 滑块样式 -->
        <Style Selector="Slider.setting-slider">
            <Setter Property="Height" Value="32" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <!-- 复选框样式 -->
        <Style Selector="CheckBox.setting-checkbox">
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <!-- 按钮样式 -->
        <Style Selector="Button.action-button">
            <Setter Property="MinWidth" Value="80" />
            <Setter Property="Height" Value="32" />
            <Setter Property="Margin" Value="5" />
        </Style>

        <!-- 分组边框样式 -->
        <Style Selector="Border.setting-group">
            <Setter Property="BorderBrush" Value="#e0e0e0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Padding" Value="12" />
            <Setter Property="Margin" Value="0,8" />
        </Style>

        <!-- 手风琴样式 -->
        <Style Selector="Expander">
            <Setter Property="Margin" Value="0,4" />
        </Style>

        <Style Selector="Expander /template/ ToggleButton">
            <Setter Property="Background" Value="#f8f9fa" />
            <Setter Property="BorderBrush" Value="#e0e0e0" />
            <Setter Property="Padding" Value="12,8" />
        </Style>
    </Window.Styles>

    <!-- 主容器 -->
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="10" Margin="0,0,0,16">
            <TextBlock Text="⚙️" FontSize="20" VerticalAlignment="Center" />
            <TextBlock Text="转换设置" FontSize="18" FontWeight="Bold" VerticalAlignment="Center" />
        </StackPanel>

        <!-- 设置内容 - 使用ScrollViewer -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="20" Margin="8">
                <!-- 预设选择 -->
                <Border Classes="setting-group" Background="#f8f9fa">
                    <StackPanel Spacing="12">
                        <TextBlock Text="🎯 转换预设" Classes="section-title" Foreground="#2c3e50" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="300" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="预设模式" Classes="label" />
                            <ComboBox Grid.Column="1" Name="PresetCombo" Classes="setting-combo">
                                <ComboBoxItem Content="GPU Fast 1080p (NVENC)" />
                                <ComboBoxItem Content="GPU High Quality 1080p (NVENC)" />
                                <ComboBoxItem Content="GPU 4K Ultra (NVENC)" />
                                <ComboBoxItem Content="GPU Fast 1080p (QSV)" />
                                <ComboBoxItem Content="GPU High Quality 1080p (QSV)" />
                                <ComboBoxItem Content="GPU Fast 1080p (AMF)" />
                                <ComboBoxItem Content="GPU High Quality 1080p (AMF)" />
                                <ComboBoxItem Content="CPU Standard 1080p" IsSelected="True" />
                                <ComboBoxItem Content="CPU High Quality 1080p" />
                            </ComboBox>
                            <TextBlock Grid.Column="2" Text="💡 推荐使用GPU加速以获得更快的转换速度"
                                       FontSize="11" Foreground="#7f8c8d" VerticalAlignment="Center" Margin="12,0,0,0" />
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 基本设置 -->
                <Border Classes="setting-group" Background="White">
                    <StackPanel Spacing="15">
                        <TextBlock Text="📁 基本设置" Classes="section-title" Foreground="#2c3e50" />

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="输出格式" Classes="label" />
                            <ComboBox Grid.Column="1" Name="OutputFormatCombo" Classes="setting-combo">
                                <!-- 推荐格式 -->
                                <ComboBoxItem Content="MP4 (推荐)" Tag="mp4" IsSelected="True" />
                                <ComboBoxItem Content="MKV (高质量)" Tag="mkv" />
                                <ComboBoxItem Content="WebM (Web优化)" Tag="webm" />

                                <!-- 通用格式 -->
                                <ComboBoxItem Content="AVI (兼容性)" Tag="avi" />
                                <ComboBoxItem Content="MOV (Apple)" Tag="mov" />
                                <ComboBoxItem Content="M4V (iTunes)" Tag="m4v" />

                                <!-- 移动设备格式 -->
                                <ComboBoxItem Content="3GP (移动设备)" Tag="3gp" />

                                <!-- 传统格式 -->
                                <ComboBoxItem Content="WMV (Windows)" Tag="wmv" />
                                <ComboBoxItem Content="FLV (Flash)" Tag="flv" />

                                <!-- 广播格式 -->
                                <ComboBoxItem Content="MPEG (标准)" Tag="mpg" />
                                <ComboBoxItem Content="TS (传输流)" Tag="ts" />
                                <ComboBoxItem Content="MTS (AVCHD)" Tag="mts" />
                                <ComboBoxItem Content="M2TS (蓝光)" Tag="m2ts" />

                                <!-- 特殊格式 -->
                                <ComboBoxItem Content="VOB (DVD)" Tag="vob" />
                                <ComboBoxItem Content="ASF (Windows Media)" Tag="asf" />

                                <!-- 智能选项 -->
                                <ComboBoxItem Content="保持原格式" Tag="keep_original" />
                                <ComboBoxItem Content="自动选择最佳格式" Tag="auto_best" />
                            </ComboBox>

                            <TextBlock Grid.Column="3" Text="分辨率" Classes="label" />
                            <ComboBox Grid.Column="4" Name="ResolutionCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="保持原始" Tag="原始" />
                                <ComboBoxItem Content="4K (3840x2160)" Tag="3840x2160" />
                                <ComboBoxItem Content="1080p (1920x1080)" Tag="1920x1080" />
                                <ComboBoxItem Content="720p (1280x720)" Tag="1280x720" />
                                <ComboBoxItem Content="480p (854x480)" Tag="854x480" />
                            </ComboBox>
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="硬件加速" Classes="label" />
                            <ComboBox Grid.Column="1" Name="HardwareAccelerationCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="自动检测" Tag="auto" />
                                <ComboBoxItem Content="禁用" Tag="none" />
                                <ComboBoxItem Content="NVIDIA NVENC" Tag="cuda" />
                                <ComboBoxItem Content="Intel Quick Sync" Tag="qsv" />
                                <ComboBoxItem Content="AMD AMF" Tag="d3d11va" />
                                <ComboBoxItem Content="Apple VideoToolbox" Tag="videotoolbox" />
                            </ComboBox>

                            <TextBlock Grid.Column="3" Text="编码模式" Classes="label" />
                            <ComboBox Grid.Column="4" Name="TwoPassCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="单遍编码 (快速)" Tag="false" />
                                <ComboBoxItem Content="两遍编码 (高质量)" Tag="true" />
                            </ComboBox>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 视频设置 -->
                <Border Classes="setting-group" Background="#f8f9fa">
                    <StackPanel Spacing="15">
                        <TextBlock Text="🎬 视频设置" Classes="section-title" Foreground="#2c3e50" />

                        <!-- 编码器和预设 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="视频编码器" Classes="label" />
                            <ComboBox Grid.Column="1" Name="VideoCodecCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="H.264 (CPU)" Tag="libx264" />
                                <ComboBoxItem Content="H.264 (NVIDIA)" Tag="h264_nvenc" />
                                <ComboBoxItem Content="H.264 (Intel QSV)" Tag="h264_qsv" />
                                <ComboBoxItem Content="H.264 (AMD AMF)" Tag="h264_amf" />
                                <ComboBoxItem Content="H.265/HEVC (CPU)" Tag="libx265" />
                                <ComboBoxItem Content="H.265/HEVC (NVIDIA)" Tag="hevc_nvenc" />
                                <ComboBoxItem Content="H.265/HEVC (Intel QSV)" Tag="hevc_qsv" />
                                <ComboBoxItem Content="H.265/HEVC (AMD AMF)" Tag="hevc_amf" />
                                <ComboBoxItem Content="VP9 (CPU)" Tag="libvpx-vp9" />
                                <ComboBoxItem Content="AV1 (NVIDIA)" Tag="av1_nvenc" />
                            </ComboBox>

                            <TextBlock Grid.Column="3" Text="编码预设" Classes="label" />
                            <ComboBox Grid.Column="4" Name="EncodingPresetCombo" Classes="setting-combo" SelectedIndex="5">
                                <ComboBoxItem Content="极快 (最低质量)" Tag="ultrafast" />
                                <ComboBoxItem Content="超快" Tag="superfast" />
                                <ComboBoxItem Content="很快" Tag="veryfast" />
                                <ComboBoxItem Content="较快" Tag="faster" />
                                <ComboBoxItem Content="快" Tag="fast" />
                                <ComboBoxItem Content="中等 (推荐)" Tag="medium" />
                                <ComboBoxItem Content="慢" Tag="slow" />
                                <ComboBoxItem Content="较慢" Tag="slower" />
                                <ComboBoxItem Content="很慢 (最高质量)" Tag="veryslow" />
                            </ComboBox>
                        </Grid>

                        <!-- 质量设置 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="质量模式" Classes="label" />
                            <ComboBox Grid.Column="1" Name="QualityModeCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="恒定质量 (CRF)" Tag="CRF" />
                                <ComboBoxItem Content="恒定比特率 (CBR)" Tag="Bitrate" />
                                <ComboBoxItem Content="可变比特率 (VBR)" Tag="VBR" />
                                <ComboBoxItem Content="两遍编码" Tag="TwoPass" />
                            </ComboBox>

                            <TextBlock Grid.Column="3" Text="帧率" Classes="label" />
                            <ComboBox Grid.Column="4" Name="FrameRateCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="保持原始" Tag="原始" />
                                <ComboBoxItem Content="24 fps (电影)" Tag="24" />
                                <ComboBoxItem Content="25 fps (PAL)" Tag="25" />
                                <ComboBoxItem Content="30 fps (NTSC)" Tag="30" />
                                <ComboBoxItem Content="50 fps" Tag="50" />
                                <ComboBoxItem Content="60 fps" Tag="60" />
                                <ComboBoxItem Content="120 fps" Tag="120" />
                            </ComboBox>
                        </Grid>

                        <!-- CRF质量值和比特率设置 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="300" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!-- CRF质量值 -->
                            <TextBlock Grid.Column="0" Text="CRF质量值" Classes="label" Name="CrfLabel" />
                            <StackPanel Grid.Column="1" Name="CrfQualityPanel" Spacing="4">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <Slider Name="CrfQualitySlider" Classes="setting-slider"
                                            Minimum="0" Maximum="51" Value="23" Width="200" />
                                    <TextBlock Name="CrfValueText" Text="23" FontWeight="Bold"
                                               VerticalAlignment="Center" MinWidth="30" />
                                </StackPanel>
                                <TextBlock Text="0=无损, 18=视觉无损, 23=高质量, 28=中等质量"
                                           FontSize="10" Foreground="#7f8c8d" />
                            </StackPanel>

                            <!-- 比特率设置 -->
                            <TextBlock Grid.Column="3" Text="视频比特率" Classes="label" Name="BitrateLabel" IsVisible="False" />
                            <StackPanel Grid.Column="4" Name="BitratePanel" IsVisible="False" Orientation="Horizontal" Spacing="8">
                                <NumericUpDown Name="VideoBitrateInput" Minimum="100" Maximum="50000"
                                               Value="5000" Width="120" />
                                <TextBlock Text="kbps" VerticalAlignment="Center" FontSize="12" Foreground="#7f8c8d" />
                            </StackPanel>
                        </Grid>

                        <!-- 编码配置 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="编码配置" Classes="label" />
                            <ComboBox Grid.Column="1" Name="ProfileCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="自动" Tag="auto" />
                                <ComboBoxItem Content="Baseline" Tag="baseline" />
                                <ComboBoxItem Content="Main" Tag="main" />
                                <ComboBoxItem Content="High" Tag="high" />
                                <ComboBoxItem Content="High 10" Tag="high10" />
                                <ComboBoxItem Content="High 4:2:2" Tag="high422" />
                                <ComboBoxItem Content="High 4:4:4" Tag="high444" />
                            </ComboBox>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 音频设置 -->
                <Border Classes="setting-group" Background="White">
                    <StackPanel Spacing="15">
                        <TextBlock Text="🎵 音频设置" Classes="section-title" Foreground="#2c3e50" />

                        <!-- 音频编码器和质量模式 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="音频编码器" Classes="label" />
                            <ComboBox Grid.Column="1" Name="AudioCodecCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="AAC (推荐)" Tag="aac" />
                                <ComboBoxItem Content="MP3" Tag="libmp3lame" />
                                <ComboBoxItem Content="Opus (高效)" Tag="libopus" />
                                <ComboBoxItem Content="FLAC (无损)" Tag="flac" />
                                <ComboBoxItem Content="AC3 (杜比)" Tag="ac3" />
                                <ComboBoxItem Content="E-AC3 (杜比增强)" Tag="eac3" />
                                <ComboBoxItem Content="复制原始" Tag="copy" />
                                <ComboBoxItem Content="移除音频" Tag="none" />
                            </ComboBox>

                            <TextBlock Grid.Column="3" Text="质量模式" Classes="label" />
                            <ComboBox Grid.Column="4" Name="AudioQualityModeCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="比特率" Tag="bitrate" />
                                <ComboBoxItem Content="质量等级" Tag="quality" />
                                <ComboBoxItem Content="可变比特率" Tag="vbr" />
                            </ComboBox>
                        </Grid>

                        <!-- 音频比特率和声道 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="音频比特率" Classes="label" />
                            <ComboBox Grid.Column="1" Name="AudioQualityCombo" Classes="setting-combo" SelectedIndex="2">
                                <ComboBoxItem Content="96 kbps (低质量)" Tag="96" />
                                <ComboBoxItem Content="128 kbps (标准)" Tag="128" />
                                <ComboBoxItem Content="192 kbps (高质量)" Tag="192" />
                                <ComboBoxItem Content="256 kbps (很高质量)" Tag="256" />
                                <ComboBoxItem Content="320 kbps (最高质量)" Tag="320" />
                                <ComboBoxItem Content="512 kbps (专业)" Tag="512" />
                            </ComboBox>

                            <TextBlock Grid.Column="3" Text="声道配置" Classes="label" />
                            <ComboBox Grid.Column="4" Name="AudioChannelsCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="保持原始" Tag="原始" />
                                <ComboBoxItem Content="单声道" Tag="1" />
                                <ComboBoxItem Content="立体声" Tag="2" />
                                <ComboBoxItem Content="5.1环绕声" Tag="6" />
                                <ComboBoxItem Content="7.1环绕声" Tag="8" />
                            </ComboBox>
                        </Grid>

                        <!-- 采样率和音量 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="采样率" Classes="label" />
                            <ComboBox Grid.Column="1" Name="SampleRateCombo" Classes="setting-combo" SelectedIndex="3">
                                <ComboBoxItem Content="保持原始" Tag="原始" />
                                <ComboBoxItem Content="22.05 kHz" Tag="22050" />
                                <ComboBoxItem Content="44.1 kHz (CD质量)" Tag="44100" />
                                <ComboBoxItem Content="48 kHz (DVD质量)" Tag="48000" />
                                <ComboBoxItem Content="96 kHz (高保真)" Tag="96000" />
                                <ComboBoxItem Content="192 kHz (专业)" Tag="192000" />
                            </ComboBox>

                            <TextBlock Grid.Column="3" Text="音量调整" Classes="label" />
                            <StackPanel Grid.Column="4" Orientation="Horizontal" Spacing="8">
                                <Slider Name="AudioVolumeSlider" Classes="setting-slider"
                                        Minimum="-20" Maximum="20" Value="0" Width="120" />
                                <TextBlock Name="VolumeValueText" Text="0.0 dB" FontWeight="Bold"
                                           VerticalAlignment="Center" MinWidth="50" />
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 高级设置 -->
                <Border Classes="setting-group" Background="#f8f9fa">
                    <StackPanel Spacing="15">
                        <TextBlock Text="⚙️ 高级设置" Classes="section-title" Foreground="#2c3e50" />

                        <!-- 像素格式和色彩空间 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="像素格式" Classes="label" />
                            <ComboBox Grid.Column="1" Name="PixelFormatCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="自动" Tag="auto" />
                                <ComboBoxItem Content="YUV420P (标准)" Tag="yuv420p" />
                                <ComboBoxItem Content="YUV422P (专业)" Tag="yuv422p" />
                                <ComboBoxItem Content="YUV444P (无损)" Tag="yuv444p" />
                                <ComboBoxItem Content="YUV420P 10-bit" Tag="yuv420p10le" />
                                <ComboBoxItem Content="YUV422P 10-bit" Tag="yuv422p10le" />
                            </ComboBox>

                            <TextBlock Grid.Column="3" Text="色彩空间" Classes="label" />
                            <ComboBox Grid.Column="4" Name="ColorSpaceCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="自动" Tag="auto" />
                                <ComboBoxItem Content="BT.709 (HD)" Tag="bt709" />
                                <ComboBoxItem Content="BT.2020 (4K HDR)" Tag="bt2020" />
                                <ComboBoxItem Content="SMPTE-170M (NTSC)" Tag="smpte170m" />
                                <ComboBoxItem Content="BT.470BG (PAL)" Tag="bt470bg" />
                            </ComboBox>
                        </Grid>

                        <!-- 复选框选项 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="300" />
                                <ColumnDefinition Width="300" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Spacing="8">
                                <CheckBox Name="FastStartCheckBox" Content="快速启动 (Web优化)" IsChecked="True" Classes="setting-checkbox" />
                                <TextBlock Text="将元数据移到文件开头，便于网络播放" FontSize="10" Foreground="#7f8c8d" Margin="20,0,0,0" />
                            </StackPanel>

                            <StackPanel Grid.Column="1" Spacing="8">
                                <CheckBox Name="DeinterlaceCheckBox" Content="去隔行扫描" Classes="setting-checkbox" />
                                <TextBlock Text="移除隔行扫描视频的锯齿效果" FontSize="10" Foreground="#7f8c8d" Margin="20,0,0,0" />
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 滤镜设置 -->
                <Border Classes="setting-group" Background="White">
                    <StackPanel Spacing="15">
                        <TextBlock Text="🎨 滤镜设置" Classes="section-title" Foreground="#2c3e50" />

                        <!-- 降噪滤镜 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="200" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="降噪滤镜" Classes="label" />
                            <ComboBox Grid.Column="1" Name="DenoiseCombo" Classes="setting-combo" SelectedIndex="0">
                                <ComboBoxItem Content="无" Tag="none" />
                                <ComboBoxItem Content="高质量降噪" Tag="hqdn3d" />
                                <ComboBoxItem Content="非局部均值降噪" Tag="nlmeans" />
                                <ComboBoxItem Content="BM3D降噪 (最佳)" Tag="bm3d" />
                            </ComboBox>
                            <TextBlock Grid.Column="2" Text="💡 降噪可以改善视频质量，但会增加处理时间"
                                       FontSize="11" Foreground="#7f8c8d" VerticalAlignment="Center" Margin="12,0,0,0" />
                        </Grid>

                        <!-- 自定义滤镜 -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="400" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="视频滤镜" Classes="label" />
                            <TextBox Grid.Row="0" Grid.Column="1" Name="VideoFiltersTextBox"
                                     Watermark="例如: scale=1920:1080,unsharp=5:5:1.0" Height="32" />
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="FFmpeg视频滤镜语法，多个滤镜用逗号分隔"
                                       FontSize="10" Foreground="#7f8c8d" Margin="0,2,0,8" />

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="音频滤镜" Classes="label" />
                            <TextBox Grid.Row="2" Grid.Column="1" Name="AudioFiltersTextBox"
                                     Watermark="例如: volume=0.8,highpass=f=200" Height="32" />
                            <TextBlock Grid.Row="3" Grid.Column="1" Text="FFmpeg音频滤镜语法，多个滤镜用逗号分隔"
                                       FontSize="10" Foreground="#7f8c8d" Margin="0,2,0,0" />
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- 底部按钮 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10" Margin="0,16,0,0">
            <Button Name="CancelButton" Content="取消" Classes="action-button" />
            <Button Name="SaveButton" Content="保存" Classes="action-button" Background="#9b59b6" Foreground="White" />
        </StackPanel>
    </Grid>
</Window>